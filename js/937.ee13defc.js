"use strict";(globalThis["webpackChunkweb_admin"]=globalThis["webpackChunkweb_admin"]||[]).push([[937],{937:(a,e,l)=>{l.r(e),l.d(e,{default:()=>X});var t=l(9835),s=l(1957),n=l(6970);const i=a=>((0,t.dD)("data-v-5ab128a3"),a=a(),(0,t.Cn)(),a),r={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},o={class:"row q-mt-lg"},u={class:"row col-12 q-mt-md"},d=i((()=>(0,t._)("div",{class:"col-md-4 col-lg-4 col-xs-12"},[(0,t._)("div",{class:"q-table__title"},"Master Data Pengajuan Surat"),(0,t._)("p",{class:"text-caption"},"Data Pengajuan Surat yang di lakukan di dalam sistem")],-1))),p=i((()=>(0,t._)("span",{class:"rowNumber"},null,-1))),m={key:0,class:"text-red"},g=i((()=>(0,t._)("div",null,"File Kosong",-1))),c=[g],w={key:1},f=i((()=>(0,t._)("div",{class:"text-h6"},"#Data Pembelian",-1))),_=i((()=>(0,t._)("span",{class:"rowNumber"},null,-1))),b={key:0},k=i((()=>(0,t._)("div",null,"File Kosong",-1))),h=[k],q={key:1},W=i((()=>(0,t._)("div",null,"File ",-1))),y=[W];function j(a,e,l,i,g,k){const W=(0,t.up)("q-breadcrumbs-el"),j=(0,t.up)("q-breadcrumbs"),v=(0,t.up)("q-card"),S=(0,t.up)("q-space"),$=(0,t.up)("q-btn"),P=(0,t.up)("q-input"),Z=(0,t.up)("q-slide-transition"),Q=(0,t.up)("q-td"),z=(0,t.up)("q-tr"),C=(0,t.up)("q-table"),T=(0,t.up)("q-card-section"),U=(0,t.up)("q-separator"),D=(0,t.up)("q-img"),N=(0,t.up)("q-avatar"),x=(0,t.up)("q-dialog"),A=(0,t.up)("q-item-section"),F=(0,t.up)("q-item"),I=(0,t.up)("q-card-actions"),K=(0,t.up)("q-page"),L=(0,t.Q2)("ripple"),V=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(K,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(v,{class:"my-card q-pa-md",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(W,{label:"Surat",icon:"extension"}),(0,t.Wm)(W,{label:"Pengajuan Surat",icon:"message"})])),_:1})])),_:1}),(0,t._)("div",o,[(0,t._)("div",u,[(0,t.Wm)(v,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"col-12 q-pa-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"table-style":"counter-reset: cssRowCounter "+(g.pagination.page-1)*g.pagination.rowsPerPage+";",title:"Master Data Surat","aria-label":"Text",class:"text-h5",rows:g.rows,flat:"",columns:g.columns,"row-key":"name",filter:g.filter,pagination:g.pagination},{top:(0,t.w5)((()=>[d,(0,t.Wm)(S),(0,t.Wm)($,{flat:"",round:"",color:"primary",icon:"search",onClick:e[0]||(e[0]=a=>g.visibles=!g.visibles),size:"md",class:"q-mr-sm"}),(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("div",null,[(0,t.Wm)(P,{outlined:"",debounce:"300",placeholder:"Placeholder",style:{width:"300px"},color:"primary",modelValue:g.filter,"onUpdate:modelValue":e[1]||(e[1]=a=>g.filter=a),dense:""},null,8,["modelValue"])],512),[[s.F8,g.visibles]])])),_:1})])),body:(0,t.w5)((a=>[(0,t.Wm)(z,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{class:"text-center"},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(Q,{key:"nik",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.nik),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"nama_lengkap",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.nama_lengkap),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"alamat_lengkap",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.alamat_lengkap),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"jenis_kelamin",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.jenis_kelamin),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"tempat_lahir",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.tempat_lahir),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"agama",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.agama),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"status_perkawinan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.status_perkawinan),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"jenis_surat",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.jenis_surat),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"tanggal_pengajuan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.tanggal_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"status_pengajuan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.status_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"file",props:a},{default:(0,t.w5)((()=>[null==a.row.file?((0,t.wg)(),(0,t.iD)("div",m,c)):((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)($,{label:"File",color:"green",outline:"",size:"sm",onClick:e=>k.downloadPDF(a.row._id),class:"q-ml-sm","no-caps":""},null,8,["onClick"])]))])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"aksi",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)($,{label:"Aksi",color:"green",size:"sm",to:{name:"edit_pengajuan_surat",params:{id:a.row._id}},class:"q-ml-sm","no-caps":""},null,8,["to"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["table-style","rows","columns","filter","pagination"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(x,{modelValue:g.detail.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>g.detail.visible=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(U),(0,t.Wm)(T,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{rows:g.detail.rows,"row-key":"name",flat:"",columns:g.detail.columns,"hide-pagination":!0},{body:(0,t.w5)((e=>[(0,t.Wm)(z,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{class:"text-center"},{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(Q,{key:"nik",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.barang.nik),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"jenis_surat",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.barang.jenis_surat),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"tanggal_pengajuan",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.tanggal_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"status_pengajuan",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.status_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"file",props:e},{default:(0,t.w5)((()=>[0==g.file.length?((0,t.wg)(),(0,t.iD)("div",b,h)):((0,t.wg)(),(0,t.iD)("div",q,y))])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"gambar",props:e},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[(0,t.Wm)(N,{rounded:"",size:"100px"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{src:`${a.$imgUrl}/gambar-barang/${e.row.barang.gambar}`,onClick:a=>k.tampil(e.row.barang.gambar)},null,8,["src","onClick"])])),_:2},1024),(0,t.Wm)(x,{ref:"dialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{src:`${a.$imgUrl}/gambar-barang/${g.fotoDiri}`,style:{width:"100%",height:"100%"}},null,8,["src"])])),_:1})])),_:1},512)])),_:2},1024)])),_:2},1024)),[[L]])])),_:2},1032,["props"]),(0,t.Wm)(Q,{key:"subTotal",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.subTotal),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,t.Wm)(U),(0,t.Wm)(I,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)($,{flat:"",label:"Ok",color:"primary"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var v=l(499);const S={name:"PageIndex",data(){return{file:null,nama:null,url:null,visibles:!1,card:(0,v.iH)(!1),pagination:{rowsPerPage:10},options:[],namaCustomer:[],fotoDiri:null,visibles:!1,filter:null,totalHutang:0,totalLunas:0,columns:[{name:"no",label:"No",field:"no"},{name:"nik",required:!0,label:"NIK",align:"left",field:"nik",sortable:!0},{name:"nama_lengkap",required:!0,label:"Nama Lengkap",align:"left",field:"nama_lengkap",sortable:!0},{name:"alamat_lengkap",required:!0,label:"Alamat",align:"left",field:"alamat_lengkap",sortable:!0},{name:"jenis_kelamin",required:!0,label:"Jenis Kelamin",align:"left",field:"jenis_kelamin",sortable:!0},{name:"tempat_lahir",required:!0,label:"Tempat Lahir",align:"left",field:"tempat_lahir",sortable:!0},{name:"agama",required:!0,label:"agama",align:"left",field:"agama",sortable:!0},{name:"status_perkawinan",required:!0,label:"Status Perkawinan",align:"left",field:"status_perkawinan",sortable:!0},{name:"jenis_surat",required:!0,label:"Jenis Surat",align:"left",field:"jenis_surat",sortable:!0},{name:"tanggal_pengajuan",required:!0,label:"Tanggal Pengajuan",align:"left",field:"tanggal_pengajuan",sortable:!0},{name:"status_pengajuan",required:!0,label:"Status Pengajuan",align:"left",field:"status_pengajuan",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[],detail:{visible:!1,pelanggan:null,grandTotal:null,columns:[{name:"no",label:"No",field:"no"},{name:"nik",required:!0,label:"NIK",align:"left",field:"nik",sortable:!0},{name:"nama_lengkap",required:!0,label:"Nama Lengkap",align:"left",field:"nama_lengkap",sortable:!0},{name:"alamat_lengkap",required:!0,label:"Alamat",align:"left",field:"alamat_lengkap",sortable:!0},{name:"jenis_kelamin",required:!0,label:"Jenis Kelamin",align:"left",field:"jenis_kelamin",sortable:!0},{name:"tempat_lahir",required:!0,label:"Tempat Lahir",align:"left",field:"tempat_lahir",sortable:!0},{name:"agama",required:!0,label:"agama",align:"left",field:"agama",sortable:!0},{name:"status_perkawinan",required:!0,label:"Status Perkawinan",align:"left",field:"status_perkawinan",sortable:!0},{name:"jenis_surat",required:!0,label:"Jenis Surat",align:"left",field:"jenis_surat",sortable:!0},{name:"tanggal_pengajuan",required:!0,label:"Tanggal Pengajuan",align:"left",field:"tanggal_pengajuan",sortable:!0},{name:"status_pengajuan",required:!0,label:"Status Pengajuan",align:"left",field:"status_pengajuan",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[]}}},created(){this.getCustomer()},methods:{downloadPDF(a){try{this.$api.get("pengajuan_surat/get-id/"+a).then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{console.log(a.data.data);const e=a.data.data;this.file=e.file,this.url="https://nadiaapp-production.up.railway.app/gambar-barang/"+this.file,console.log("INI FILE SETAN"),console.log(this.url);this.downloadFile(this.url,e.jenis_surat)}}))}catch(e){console.log(e.message),this.$showNotif("Terjadi ke !","negative")}},downloadFile(a,e){const l=document.createElement("a");l.href=a,l.setAttribute("download",e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},getCustomer(){try{this.$api.get("pengajuan_surat/get-all-barang").then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{const e=a.data.data;this.rows=e,e.reverse(),console.log(this.rows)}}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},tampil(a){this.$refs.dialog.show(this.fotoDiri=a)},accept(a){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menerima transaksi?",color:"green",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+a,{status:"Selesai"}).then((a=>{!0!==a.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))},reject(a){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menolak transaksi?",color:"red",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+a,{status:"Ditolak"}).then((a=>{!0!==a.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))},showDetail(a){const e=a.map((a=>({barang:a.barang,subTotal:a.subtotal})));this.detail.visible=!0,this.detail.rows=e,console.log(e)}}};var $=l(1639),P=l(9885),Z=l(4458),Q=l(2605),z=l(8052),C=l(3190),T=l(7580),U=l(136),D=l(8879),N=l(9003),x=l(3119),A=l(1233),F=l(7220),I=l(2074),K=l(926),L=l(490),V=l(6749),B=l(1357),E=l(335),J=l(1821),M=l(1136),O=l(2146),G=l(9984),H=l.n(G);const R=(0,$.Z)(S,[["render",j],["__scopeId","data-v-5ab128a3"]]),X=R;H()(S,"components",{QPage:P.Z,QCard:Z.Z,QBreadcrumbs:Q.Z,QBreadcrumbsEl:z.Z,QCardSection:C.Z,QTable:T.Z,QSpace:U.Z,QBtn:D.Z,QSlideTransition:N.Z,QInput:x.Z,QTr:A.Z,QTd:F.Z,QDialog:I.Z,QSeparator:K.Z,QItem:L.Z,QItemSection:V.Z,QAvatar:B.Z,QImg:E.Z,QCardActions:J.Z}),H()(S,"directives",{Ripple:M.Z,ClosePopup:O.Z})}}]);